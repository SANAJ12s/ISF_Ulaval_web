import{_ as D,f,g as I,h as q,i as z,q as O,k as A,l as P,m as $,p as R,o as a,c as n,a as s,s as T,u as G,t as r,v as c,x as v,y as H,b,F as J,r as K,d as E,A as h,D as N,E as Q,z as S,G as W,I as X,n as Y,H as Z}from"./index-0876195e.js";const ee={class:"admin"},se={class:"container py-5"},le={class:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-4"},oe={class:"card mb-4"},te={class:"h5 fw-bold mb-3"},ie={class:"row g-3"},ae={class:"col-md-6"},ne={class:"col-md-6"},re={class:"col-md-6"},de={class:"col-md-6"},ue={class:"col-12"},ce={class:"col-12"},me={class:"row g-3"},pe={class:"col-md-6"},ve={class:"col-md-6"},be={class:"col-md-6"},fe={class:"col-12 d-flex flex-wrap gap-2"},_e=["disabled"],ke=["disabled"],he={key:0,class:"text-danger mb-0"},ge={class:"card"},xe={class:"d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3"},ye={class:"badge"},Ve={key:0,class:"empty"},Ce={key:1,class:"empty"},we={key:2,class:"list"},Ae={class:"left"},Ee={key:0},Ne={class:"info"},Se={class:"name"},Ue={class:"role"},Fe={class:"meta"},je={class:"pill muted-pill"},Me={key:0,class:"bio"},Le={class:"links"},Be=["href"],De=["href"],Ie={class:"actions"},qe=["onClick","disabled"],ze=["onClick","disabled"],Oe={__name:"AdminExecutif",setup(Pe){const m=f(!0),p=f(!1),u=f(""),V=f([]);let g=null;const d=f(null),l=I({name:"",role:"",photo:"",bio:"",email:"",linkedin:"",order:1,isVisible:!0}),x=q(()=>[...V.value].sort((t,e)=>(t.order??999)-(e.order??999)));function y(){l.name="",l.role="",l.photo="",l.bio="",l.email="",l.linkedin="",l.order=1,l.isVisible=!0}z(()=>{const t=O(A(h,"executif"));g=P(t,e=>{V.value=e.docs.map(i=>({id:i.id,...i.data()})),m.value=!1},e=>{console.error(e),u.value="Erreur Firestore (executif). VÃ©rifie rules + config Firebase.",m.value=!1})}),$(()=>{g&&g()});function U(){var t,e;return(t=l.name)!=null&&t.trim()?(e=l.role)!=null&&e.trim()?"":"Le rÃ´le est obligatoire.":"Le nom est obligatoire."}async function F(){var i,o,_,w;u.value="";const t=U();if(t){u.value=t;return}p.value=!0;const e={name:l.name.trim(),role:l.role.trim(),photo:((i=l.photo)==null?void 0:i.trim())||"",bio:((o=l.bio)==null?void 0:o.trim())||"",email:((_=l.email)==null?void 0:_.trim())||"",linkedin:((w=l.linkedin)==null?void 0:w.trim())||"",order:Number.isFinite(l.order)?Number(l.order):999,isVisible:!!l.isVisible,updatedAt:N()};try{d.value?(await Q(S(h,"executif",d.value),e),d.value=null,y()):(await W(A(h,"executif"),{...e,createdAt:N()}),y())}catch(k){console.error(k),u.value=(k==null?void 0:k.message)||"Erreur lors de lâ€™enregistrement."}finally{p.value=!1}}function j(t){d.value=t.id,l.name=t.name||"",l.role=t.role||"",l.photo=t.photo||"",l.bio=t.bio||"",l.email=t.email||"",l.linkedin=t.linkedin||"",l.order=Number.isFinite(t.order)?t.order:999,l.isVisible=t.isVisible!==!1}function C(){d.value=null,y()}async function M(t){if(u.value="",!!window.confirm("Supprimer ce membre ?"))try{await Z(S(h,"executif",t)),d.value===t&&C()}catch(i){console.error(i),u.value=(i==null?void 0:i.message)||"Erreur lors de la suppression."}}function L(t){return t?t.split(" ").filter(Boolean).slice(0,2).map(e=>e[0].toUpperCase()).join(""):""}function B(t){return t?{backgroundImage:`url("${t}")`,backgroundSize:"cover",backgroundPosition:"center"}:{}}return(t,e)=>{const i=R("router-link");return a(),n("main",ee,[s("div",se,[s("div",le,[e[9]||(e[9]=s("div",null,[s("h1",{class:"title"},"Gestion â€” ComitÃ© exÃ©cutif"),s("p",{class:"subtitle"},"Ajoute, modifie et supprime les membres affichÃ©s sur la page â€œComitÃ© exÃ©cutifâ€.")],-1)),T(i,{class:"btn-back",to:"/admin"},{default:G(()=>[...e[8]||(e[8]=[E("â† Retour au dashboard",-1)])]),_:1})]),s("div",oe,[s("h2",te,r(d.value?"Modifier un membre":"Nouveau membre"),1),s("div",ie,[s("div",ae,[e[10]||(e[10]=s("label",{class:"form-label"},"Nom complet",-1)),c(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.name=o),class:"form-control",placeholder:"Ex: Sana Najâ€¦"},null,512),[[v,l.name,void 0,{trim:!0}]])]),s("div",ne,[e[11]||(e[11]=s("label",{class:"form-label"},"RÃ´le",-1)),c(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>l.role=o),class:"form-control",placeholder:"Ex: PrÃ©sidente"},null,512),[[v,l.role,void 0,{trim:!0}]])]),s("div",re,[e[12]||(e[12]=s("label",{class:"form-label"},"Photo (URL)",-1)),c(s("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.photo=o),class:"form-control",placeholder:"https://... ou /executif/xxx.jpg"},null,512),[[v,l.photo,void 0,{trim:!0}]]),e[13]||(e[13]=s("small",{class:"muted"},"Astuce : plus tard on branchera Firebase Storage pour upload.",-1))]),s("div",de,[e[14]||(e[14]=s("label",{class:"form-label"},"Ordre dâ€™affichage",-1)),c(s("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>l.order=o),type:"number",class:"form-control",placeholder:"1"},null,512),[[v,l.order,void 0,{number:!0}]]),e[15]||(e[15]=s("small",{class:"muted"},"Plus petit = affichÃ© en premier.",-1))]),s("div",ue,[e[16]||(e[16]=s("label",{class:"form-label"},"Bio (optionnel)",-1)),c(s("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.bio=o),class:"form-control",rows:"3",placeholder:"Courte description..."},null,512),[[v,l.bio,void 0,{trim:!0}]])]),s("div",ce,[e[17]||(e[17]=s("label",{class:"form-label"},"Contact (public)",-1)),s("div",me,[s("div",pe,[c(s("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>l.email=o),type:"email",class:"form-control",placeholder:"Email"},null,512),[[v,l.email,void 0,{trim:!0}]])]),s("div",ve,[c(s("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>l.linkedin=o),class:"form-control",placeholder:"Lien LinkedIn"},null,512),[[v,l.linkedin,void 0,{trim:!0}]])])]),e[18]||(e[18]=s("small",{class:"muted"},"Ces champs seront visibles publiquement (si remplis).",-1))]),s("div",be,[e[20]||(e[20]=s("label",{class:"form-label"},"Afficher sur le site",-1)),c(s("select",{"onUpdate:modelValue":e[7]||(e[7]=o=>l.isVisible=o),class:"form-select"},[...e[19]||(e[19]=[s("option",{value:!0},"Oui",-1),s("option",{value:!1},"Non",-1)])],512),[[H,l.isVisible]])]),s("div",fe,[s("button",{class:"btn-primary",onClick:F,disabled:p.value||m.value},r(p.value?"...":d.value?"Enregistrer":"Ajouter"),9,_e),d.value?(a(),n("button",{key:0,class:"btn-ghost",onClick:C,disabled:p.value||m.value}," Annuler ",8,ke)):b("",!0)]),u.value?(a(),n("p",he,r(u.value),1)):b("",!0)])]),s("div",ge,[s("div",xe,[e[21]||(e[21]=s("h2",{class:"h5 fw-bold mb-0"},"Membres",-1)),s("span",ye,r(x.value.length)+" total",1)]),m.value?(a(),n("div",Ve,"Chargementâ€¦")):x.value.length===0?(a(),n("div",Ce," Aucun membre pour le moment. Ajoute-en un ðŸ‘† ")):(a(),n("div",we,[(a(!0),n(J,null,K(x.value,o=>(a(),n("div",{key:o.id,class:"item"},[s("div",Ae,[s("div",{class:"avatar",style:X(B(o.photo))},[o.photo?b("",!0):(a(),n("span",Ee,r(L(o.name)),1))],4),s("div",Ne,[s("div",Se,r(o.name),1),s("div",Ue,r(o.role),1),s("div",Fe,[s("span",je,"Ordre: "+r(o.order??999),1),s("span",{class:Y(["pill",o.isVisible?"ok":"off"])},r(o.isVisible?"Visible":"MasquÃ©"),3)]),o.bio?(a(),n("p",Me,r(o.bio),1)):b("",!0),s("div",Le,[o.email?(a(),n("a",{key:0,class:"link",href:`mailto:${o.email}`},"âœ‰ï¸ "+r(o.email),9,Be)):b("",!0),o.linkedin?(a(),n("a",{key:1,class:"link",href:o.linkedin,target:"_blank",rel:"noreferrer"}," Ouvrir LinkedIn ",8,De)):b("",!0)])])]),s("div",Ie,[s("button",{class:"btn-small",onClick:_=>j(o),disabled:p.value||m.value},"Modifier",8,qe),s("button",{class:"btn-small danger",onClick:_=>M(o.id),disabled:p.value||m.value},"Supprimer",8,ze)])]))),128))])),e[22]||(e[22]=s("p",{class:"hint"},[E(" ðŸ”§ Collection Firestore : "),s("code",null,"executif")],-1))])])])}}},Re=D(Oe,[["__scopeId","data-v-eaeaa4aa"]]);export{Re as default};
